<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git代码回滚 | Libra</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/libra-static-blogfavicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/libra-static-blog/assets/css/0.styles.51a42035.css" as="style"><link rel="preload" href="/libra-static-blog/assets/js/app.9dca519c.js" as="script"><link rel="preload" href="/libra-static-blog/assets/js/6.01440f2c.js" as="script"><link rel="preload" href="/libra-static-blog/assets/js/27.0ccdaed5.js" as="script"><link rel="preload" href="/libra-static-blog/assets/js/1.10cf5c93.js" as="script"><link rel="prefetch" href="/libra-static-blog/assets/js/10.29aae0a9.js"><link rel="prefetch" href="/libra-static-blog/assets/js/11.c4ae00fa.js"><link rel="prefetch" href="/libra-static-blog/assets/js/12.ee93c86c.js"><link rel="prefetch" href="/libra-static-blog/assets/js/13.2235ea20.js"><link rel="prefetch" href="/libra-static-blog/assets/js/14.df792a7f.js"><link rel="prefetch" href="/libra-static-blog/assets/js/15.5fedd345.js"><link rel="prefetch" href="/libra-static-blog/assets/js/16.64879888.js"><link rel="prefetch" href="/libra-static-blog/assets/js/17.0da37093.js"><link rel="prefetch" href="/libra-static-blog/assets/js/18.adfc4ced.js"><link rel="prefetch" href="/libra-static-blog/assets/js/19.5068c1ad.js"><link rel="prefetch" href="/libra-static-blog/assets/js/2.517e8c6a.js"><link rel="prefetch" href="/libra-static-blog/assets/js/20.b73f8af7.js"><link rel="prefetch" href="/libra-static-blog/assets/js/21.de2815d8.js"><link rel="prefetch" href="/libra-static-blog/assets/js/22.ef7e90d1.js"><link rel="prefetch" href="/libra-static-blog/assets/js/23.3d596879.js"><link rel="prefetch" href="/libra-static-blog/assets/js/24.b2813d80.js"><link rel="prefetch" href="/libra-static-blog/assets/js/25.6b008122.js"><link rel="prefetch" href="/libra-static-blog/assets/js/26.ce0b7ec7.js"><link rel="prefetch" href="/libra-static-blog/assets/js/5.19bac7f5.js"><link rel="prefetch" href="/libra-static-blog/assets/js/7.f96dee02.js"><link rel="prefetch" href="/libra-static-blog/assets/js/8.b47fffad.js"><link rel="prefetch" href="/libra-static-blog/assets/js/9.344dd3e0.js"><link rel="prefetch" href="/libra-static-blog/assets/js/vuejs-paginate.410863bd.js">
    <link rel="stylesheet" href="/libra-static-blog/assets/css/0.styles.51a42035.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="article"><nav class="topbar"><span class="logo"><span class="logo-text">L</span></span> <ul class="menu"><li class="menu-item"><a href="/libra-static-blog/" class="link router-link-active">主页</a></li> <li class="menu-item"><a href="/libra-static-blog/blog" class="link">博客</a></li> <li class="menu-item"><a href="/libra-static-blog/tag" class="link">标签</a></li> <li class="menu-item"><a href="/libra-static-blog/category" class="link">分类</a></li> <li class="menu-item"><a href="/libra-static-blog/timeline" class="link">时间线</a></li> <li class="menu-item"><a href="/libra-static-blog/contact" class="link">联系我</a></li></ul> <div class="search"><i class="iconfont iconsearch"></i> <div class="search-box" data-v-085dd956><input aria-label="Search" placeholder="请输入你想要搜索的内容..." autocomplete="off" spellcheck="false" value="" data-v-085dd956> <!----></div></div> <span class="mobile-nav"><i class="iconfont iconnav"></i></span> <nav class="mobile-nav-item" style="display:none;"><div class="header-button"><i class="iconfont iconback"></i></div> <div class="header-info"><div class="avatar"><img src="https://libra321.oss-cn-huhehaote.aliyuncs.com/avatar.jpg" alt="" class="avatar-img"></div> <span class="name">Libra</span> <i class="mail">libra085925@gmail.com</i> <div class="statistics"><span class="articles">
            11
            <i class="white"> 文章</i></span> <span class="verticle-line white">|</span> <span class="link">
            5
            <i class="white"> 分类</i></span></div></div> <div class="line"></div> <ul class="nav-menu"><li class="nav-menu-item"><a href="/libra-static-blog/" class="router-link-active"><i class="iconfont iconhome"></i> <i class="white">主页</i></a></li> <li class="nav-menu-item"><a href="/libra-static-blog/blog"><i class="iconfont iconblog"></i> <i class="white">博客</i></a></li> <li class="nav-menu-item"><a href="/libra-static-blog/tag"><i class="iconfont iconlabel"></i> <i class="white">标签</i></a></li> <li class="nav-menu-item"><a href="/libra-static-blog/category"><i class="iconfont iconfenlei-"></i> <i class="white">分类</i></a></li> <li class="nav-menu-item"><a href="/libra-static-blog/timeline"><i class="iconfont icontimeline"></i> <i class="white">时间线</i></a></li> <li class="nav-menu-item"><a href="/libra-static-blog/contact"><i class="iconfont iconother"></i> <i class="white">联系我</i></a></li></ul></nav></nav> <div id="particles-js" color="#fff" particleOpacity="0.7" linesColor="#fff" particlesNumber="60" shapeType="circle" particleSize="4" linesWidth="1" lineLinked="true" lineOpacity="0.4" linesDistance="150" moveSpeed="6" hoverEffect="true" hoverMode="grab" clickEffect="true" clickMode="push" class="bg"></div> <div class="article-content"><div class="left"><span class="title animated rollIn">git代码回滚</span> <ul class="label animated zoomInUp"><li class="date"><i class="iconfont iconshizhong"></i>
          2021-04-12
        </li> <li class="update"><i class="iconfont iconUpdate"></i>
          2021-04-12
        </li> <li class="labels"><i class="iconfont iconlabel"></i>
          git
        </li></ul> <div class="image"><img src="https://libra321.oss-cn-huhehaote.aliyuncs.com/blog/git/github.jpeg" alt width="100%"></div> <div class="detail"><div><div class="content__default"><h1 id="git-代码回滚"><a href="#git-代码回滚" class="header-anchor">#</a> <code>git</code> 代码回滚</h1> <h2 id="本地代码回滚"><a href="#本地代码回滚" class="header-anchor">#</a> 本地代码回滚</h2> <ul><li>本地代码回滚到上一版本（或者指定版本）</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> reset --hard HEAD~1
</code></pre></div><ul><li>加入 <code>-f</code> 参数，强制提交，远程端将强制跟新到 <code>reset</code> 版本</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> push -f
</code></pre></div><h2 id="远程代码回滚"><a href="#远程代码回滚" class="header-anchor">#</a> 远程代码回滚</h2> <ul><li>新建 <code>backup</code> 分支 作为备份，以防万一</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch backup
</code></pre></div><ul><li>将本地的 <code>backup</code> 分支　推送到远程的 <code>backup</code></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> push origin backup:backup
</code></pre></div><ul><li>本地仓库彻底回退到 <code>xxxxx</code> 版本，<code>xxxxx</code> 版本之后的 <code>commit</code> 信息将丢失</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> reset --hard xxxxx
</code></pre></div><ul><li>删除远程的 <code>master</code> 分支 (注意 <code>master</code>前有个 <code>:</code> )</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> push origin :master
</code></pre></div><blockquote><p>如果远程仓库的 <code>master</code> 如果是保护分支将报错，请去掉对分支的保护设置</p></blockquote> <ul><li>重新创建远程 <code>master</code> 分支</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code> <span class="token function">git</span> push origin master
</code></pre></div></div></div></div> <!----></div> <div class="right"><div class="test animated bounceInRight" data-v-1daa5799><span class="labeltitle" data-v-1daa5799>分类</span> <div class="label-container" data-v-1daa5799><a href="/libra-static-blog/category" class="container" data-v-3fd29ed0 data-v-1daa5799>
  All
</a><a href="/libra-static-blog/category/css" class="container" data-v-3fd29ed0 data-v-1daa5799>
  css
</a><a href="/libra-static-blog/category/javascript" class="container" data-v-3fd29ed0 data-v-1daa5799>
  javascript
</a><a href="/libra-static-blog/category/flutter" class="container" data-v-3fd29ed0 data-v-1daa5799>
  flutter
</a><a href="/libra-static-blog/category/database" class="container" data-v-3fd29ed0 data-v-1daa5799>
  database
</a><a href="/libra-static-blog/category/git" class="container" data-v-3fd29ed0 data-v-1daa5799>
  git
</a></div></div> <div class="my" data-v-85113e2e><div class="header-info" data-v-85113e2e><div class="avatar" data-v-85113e2e><img src="https://libra321.oss-cn-huhehaote.aliyuncs.com/avatar.jpg" alt class="avatar-img" data-v-85113e2e></div> <span class="name" data-v-85113e2e>Libra</span> <i class="mail" data-v-85113e2e>libra085925@gmail.com</i> <div class="statistics" data-v-85113e2e><span class="articles" data-v-85113e2e>
        11
        <i class="white" data-v-85113e2e> 文章</i></span> <span class="verticle-line white" data-v-85113e2e>|</span> <span class="link" data-v-85113e2e>
        5
        <i class="white" data-v-85113e2e> 分类</i></span></div> <a href="/libra-static-blog/contact" class="more" data-v-85113e2e>联系我</a></div></div> <div class="list"><div><ul><li><a href="/libra-static-blog/2021/04/12/git%E4%BB%A3%E7%A0%81%E5%9B%9E%E6%BB%9A/#本地代码回滚">本地代码回滚</a></li><li><a href="/libra-static-blog/2021/04/12/git%E4%BB%A3%E7%A0%81%E5%9B%9E%E6%BB%9A/#远程代码回滚">远程代码回滚</a></li></ul></div></div></div></div> <div class="footer"><div class="left"><div class="wave-libra"><div class="wavetext"><div class="coast delay"><div class="wave-rel-wrap"><div class="wave delay"></div></div></div> <div class="text text-l">L</div> <div class="text text-i">i</div> <div class="text text-b">b</div> <div class="text text-r">r</div> <div class="text text-a">a</div></div></div></div> <div class="right">
    Copyright © 2019-2020 Libra | 版权所有
  </div></div></div><div class="global-ui"><!----></div></div>
    <script src="/libra-static-blog/assets/js/app.9dca519c.js" defer></script><script src="/libra-static-blog/assets/js/6.01440f2c.js" defer></script><script src="/libra-static-blog/assets/js/27.0ccdaed5.js" defer></script><script src="/libra-static-blog/assets/js/1.10cf5c93.js" defer></script>
  </body>
</html>
